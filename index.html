<!DOCTYPE html>
<!-- Web graphical OS with lots of options and some demo programs -->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="assets/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="assets/favicon/site.webmanifest" />
    <title>Web OS Demo</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer async></script>
  </head>
  <body>
    <!-- ########### -->
    <!-- #         # -->
    <!-- #   Bar   # -->
    <!-- #         # -->
    <!-- ########### -->
    <window
      name="window_Bar"
      style="
        --x: 400px;
        --y: 0px;
        --width: 510px;
        --height: 30px;
        --z-index: 6;
        --maximised: 0;
        color: var(--theme-main);
        -webkit-user-select: none;
        user-select: none;
      "
      onclick="makeMain(this)"
    >
      <div style="display: flex; font-size: 16px">
        <div class="fill-left">Start</div>
        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_helloWorld_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            üåè
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_customIFrame_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            üåê
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_terminal_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            <code style="margin: auto 0">&lt;/&gt;</code>
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_Music_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            üéµ
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_CSSSettings_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            <code style="margin: auto 0">CSS</code>
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_JSSettings_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            <code style="margin: auto 0">JS</code>
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>

        <div id="window_DEV_Control">
          <button class="window-button" onclick="minimiseWindow(this)">
            <code style="margin: auto 0">DEV</code>
          </button>
        </div>

        <svg
          style="margin: auto"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="22"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 1 12 23" />
        </svg>
        <div class="fill-right">Tray</div>
      </div>
    </window>
    <!-- #################### -->
    <!-- #                  # -->
    <!-- #   Music Window   # -->
    <!-- #                  # -->
    <!-- #################### -->
    <window
      name="window_Music"
      style="
        --x: 830px;
        --y: 520px;
        --width: 400px;
        --height: 480px;
        --z-index: 5;
        --maximised: 0;
      "
      onclick="makeMain(this)"
    >
      <header class="window-header">
        <div class="fill-left"><code>üéµ</code></div>
        <div>Music Player</div>
        <div class="fill-right windowControl" id="window_Music_Control"></div>
      </header>
      <script src="assets/fonts/fontawesome.js"></script>
      <script>
        // Define initial queue
        let queue = [
          {
            title: "Airflow",
            audio: "assets/music/Airflow.mp3",
            image: "assets/music/images/noImage.jpg",
          },
          {
            title: "An Epic Story",
            audio: "assets/music/An Epic Story.mp3",
            image: "assets/music/images/noImage.jpg",
          },
          {
            title: "Microworld",
            audio: "assets/music/Microworld.mp3",
            image: "assets/music/images/noImage.jpg",
          },
        ];
        // Index
        let songIndex = 0;
      </script>
      <style>
        #music-song-image {
          max-width: 10em;
          max-height: 10em;
          margin: 1em;
          border-radius: var(--rounding);
          transition-duration: 200ms;
          box-shadow: var(--shadow-distance) var(--shadow-distance) var(--shadow-blur) var(--shadow);
        }
        .music-playing-image {
          max-width: 12em !important;
          max-height: 12em !important;
          margin: 0 !important;
        }
        #music-progress-container {
          background-color: var(--theme-bg-alt2);
          border-radius: var(--btn-rounding);
          padding: 0;
          cursor: pointer;
          height: var(--scroll-bar-width);
        }
        #music-progress {
          background-color: var(--theme-main);
          border-radius: var(--btn-rounding);
          height: 100%;
          width: 0%;
          transition: width 0.1s linear;
        }
        .music-volume {
          width: calc(100% - 2 * var(--padding));
        }
        .control-button {
          width: 2em;
          height: 2em;
        }
        .toggled {
          background-color: var(--theme-main-mono);
          color: var(--theme-bg);
        }
      </style>
      <div class="window-area padded center middle">
        <!-- Song info -->
        <div class="center padded">
          <img src="assets/music/images/noImage.jpg" id="music-song-image" />
          <audio
            src="assets/music/Airflow.mp3"
            id="music-song-audio"
            onloadedmetadata="
              document.getElementById('music-progress-total').textContent
               = new Date(
                document.getElementById('music-song-audio').duration * 1000
              ).toISOString().slice(11, 19);
            "
            ontimeupdate="
              document.getElementById('music-progress-time').textContent
               = new Date(
                document.getElementById('music-song-audio').currentTime * 1000
              ).toISOString().slice(11,19);
              document.getElementById('music-progress').style.width = (
                document.getElementById('music-song-audio').currentTime
                 / document.getElementById('music-song-audio').duration
               ) * 100 + '%';
            "
            onended="
              songIndex += 1;
              if (!(songIndex < queue.length)) {
                songIndex = 0;
              }
              document.getElementById('music-song-audio').src = queue[songIndex].audio;
              document.getElementById('music-song-image').src = queue[songIndex].image;
              document,getElementById('music-song-title').textContent = queue[songIndex].title;
              if (document.getElementById('music-song-image').classList.contains('music-playing-image')) {
                document.getElementById('music-song-audio').play();
              }
            "
          ></audio>
          <div class="label" id="music-song-title">Airflow</div>
        </div>
        <!-- Progress -->
        <div class="center">
          <div
            class="center padded"
            id="music-progress-container"
            onclick="
              document.getElementById('music-song-audio').currentTime
               = event.offsetX / this.offsetWidth // Percent
               * document.getElementById('music-song-audio').duration;
            "
          >
            <div id="music-progress"></div>
          </div>
          <div class="flex center padded">
            <div id="music-progress-time" class="left">00:00:00</div>
            <div id="music-progress-total" class="right">00:00:00</div>
          </div>
        </div>
        <!-- Controls -->
        <div class="center padded">
          <div class="center">
            <!-- Replay Button -->
            <button
              class="icon-button control-button"
              onclick="
                if (document.getElementById('music-song-audio').loop) {
                  document.getElementById('music-song-audio').loop = false;
                } else {
                  document.getElementById('music-song-audio').loop = true;
                }
                this.classList.toggle('toggled')
              "
            >
              <i class="fas fa-redo"></i>
            </button>
            <!-- Previous Button -->
            <button
              class="icon-button control-button"
              onclick="
                songIndex -= 1;
                if (songIndex < 0) {
                  songIndex = queue.length -1;
                }
                document.getElementById('music-song-audio').src = queue[songIndex].audio;
                document.getElementById('music-song-image').src = queue[songIndex].image;
                document,getElementById('music-song-title').textContent = queue[songIndex].title;
                if (document.getElementById('music-song-image').classList.contains('music-playing-image')) {
                  document.getElementById('music-song-audio').play();
                }
              "
            >
              <i class="fas fa-step-backward"></i>
            </button>
            <!-- Play Button -->
            <button
              class="icon-button control-button"
              onclick="
                // If playing: pause, else play
                if (document.getElementById('music-song-image').classList.contains('music-playing-image')) {
                  this.querySelector('.fas').classList.remove('fa-pause');
                  this.querySelector('.fas').classList.add('fa-play');
                  document.getElementById('music-song-audio').pause();
                  document.getElementById('music-song-image').classList.remove('music-playing-image');
                } else {
                  this.querySelector('.fas').classList.remove('fa-play');
                  this.querySelector('.fas').classList.add('fa-pause');
                  document.getElementById('music-song-audio').play();
                  document.getElementById('music-song-image').classList.add('music-playing-image')
                }
              "
            >
              <i class="fas fa-play"></i>
            </button>
            <!-- Next Button -->
            <button
              class="icon-button control-button"
              onclick="
                songIndex += 1;
                if (!(songIndex < queue.length)) {
                  songIndex = 0;
                }
                document.getElementById('music-song-audio').src = queue[songIndex].audio;
                document.getElementById('music-song-image').src = queue[songIndex].image;
                document,getElementById('music-song-title').textContent = queue[songIndex].title;
                if (document.getElementById('music-song-image').classList.contains('music-playing-image')) {
                  document.getElementById('music-song-audio').play();
                }
              "
            >
              <i class="fas fa-step-forward"></i>
            </button>
            <!-- Shuffle Button -->
            <button
              class="icon-button control-button"
              onclick="
                let i = queue.length;
                // While there remain elements to shuffle...
                while (i != 0) {
                  // Pick a remaining element...
                  let ri = Math.floor(Math.random() * i);
                  i--;
                  // And swap it with the current element.
                  [queue[i], queue[ri]] = [queue[ri], queue[i]];
                }
                songIndex = 0;
                document.getElementById('music-song-audio').src = queue[songIndex].audio;
                document.getElementById('music-song-image').src = queue[songIndex].image;
                document,getElementById('music-song-title').textContent = queue[songIndex].title;
                if (document.getElementById('music-song-image').classList.contains('music-playing-image')) {
                  document.getElementById('music-song-audio').play();
                }
              "
            >
              <i class="fas fa-random"></i>
            </button>
          </div>
        </div>
        <!-- Volume Slider -->
        <div class="flex center padded">
          <div class="left middle">
            <i class="fas fa-volume-mute mute"></i>
          </div>
          <div class="center middle music-volume">
            <input
              class="music-volume"
              type="range"
              min="0"
              max="100"
              value="100"
              onchange="
                document.getElementById('music-song-audio').volume
                 = this.value / this.max
              "
            />
          </div>
          <div class="right middle">
            <i class="fas fa-volume-up volume-up"></i>
          </div>
        </div>
      </div>
    </window>
  </body>
</html>
